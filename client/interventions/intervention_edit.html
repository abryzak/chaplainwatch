<template name="interventionEdit">
  <main>
    <section id="launch-pad" class="panel" data-bind="css: {'panel-success': launchpadIsValid(), 'panel-warning': ! launchpadIsValid()}">
      <div class="panel-heading">
        <h2>Launch Pad <span class="pull-right"><i class="fa fa-fw" data-bind="css: {'fa-check': launchpadIsValid(), 'fa-asterisk': ! launchpadIsValid()}"></i></span></h2>
      </div>
      <div class="panel-body">
        <div class="form-horizontal" role="form">
          <div class="form-group" data-bind="css: {'has-success': date.isValid(), 'has-error': ! date.isValid()}">
            <label for="date" class="col-sm-4 control-label">Date <i class="fa fa-fw form-label-icon" data-bind="css: {'fa-check': date.isValid(), 'fa-asterisk': ! date.isValid()}"></i></label>
            <div class="col-sm-6">
              <input type="date" class="form-control input-lg" id="date" data-bind="value: date">
            </div>
          </div>
          <div class="form-group" data-bind="css: {'has-success': time.isValid(), 'has-error': ! time.isValid()}">
            <label for="time" class="col-sm-4 control-label">Time <i class="fa fa-fw form-label-icon" data-bind="css: {'fa-check': time.isValid(), 'fa-asterisk': ! time.isValid()}"></i></label>
            <div class="col-sm-6">
              <input type="time" class="form-control input-lg" id="time" data-bind="value: time">
            </div>
          </div>
          <div class="form-group" data-bind="css: {'has-success': respondingTo.isValid()}">
            <label for="" class="col-sm-4 control-label">Responding To <i class="fa fa-fw form-label-icon" data-bind="css: {'fa-check': respondingTo.isValid(), 'fa-asterisk': ! respondingTo.isValid()}"></i></label>
            <div class="col-sm-4">
              <ul class="list-group" data-bind="foreach: _.where(options,{category:'respondingTo'})">
                <li class="list-group-item option" data-bind="click: $parent.selectOption, css: {'text-info': $parent.respondingTo.indexOf(value) > -1, 'text-default': $parent.respondingTo.indexOf(value) == -1}">
                  <i class="fa fa-lg fa-fw" data-bind="css: {'fa-check-square-o': $parent.respondingTo.indexOf(value) > -1, 'fa-square-o': $parent.respondingTo.indexOf(value) == -1}"></i>
                  <span data-bind="text:text"></span>
                </li>
              </ul>
            </div>
          </div>
          <article data-bind="template: {name: 'single-select-template', data: {'field': 'liquorAccordPrecinct', 'label': 'Liquor Accord Precinct'} }">
          </article>
          <div class="form-group" data-bind="css: {'has-success': locationDescription.isValid()}">
            <label for="event-location" class="col-sm-4 control-label">
              Intervention Location
              <i class="fa fa-fw form-label-icon" data-bind="css:{'fa-asterisk': ! locationDescription.isValid(), 'fa-check': locationDescription.isValid()}"></i>
            </label>
            <div class="col-sm-6">
              <textarea class="form-control input-lg" rows="4" placeholder="Intervention Location" data-bind="value: locationDescription"></textarea>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-6 col-sm-offset-3">
              <span class="help-block" data-bind="if: locationLatitude() && locationLongitude()">
                <strong><i class="fa fa-globe"></i></strong> Lat: <span data-bind="text: locationLatitude"></span> Long: <span data-bind="text: locationLongitude"></span>
              </span>
              <span class="help-block" data-bind="if: (! (locationLatitude() && locationLongitude())) && (! locationError())">
                <strong><i class="fa fa-globe fa-spin"></i> Finding Location</strong>
              </span>
              <span class="help-block" data-bind="if: (! (locationLatitude() && locationLongitude())) && (locationError())">
                <strong>Location could not be found</strong> <span data-bind:"text: locationError"></span>
              </span>
            </div>
          </div>
          <article data-bind="template: { name: 'single-select-template', data: {field: 'type', label: 'Intervention Type'} }">
          </article>
        </div>
      </div>
      <div class="panel-footer">
        <div class="row">
          <div class="col-lg-6 col-lg-offset-3">
            <h4>Launch Pad section has errors</h4>
            <ul data-bindx="foreach: _.where(allErrors, {section: 'launchpad'})" data-bind="foreach: allErrors">
              <li>{{$data}}</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
    <section id="people" class="panel panel-default">
      <div class="panel-heading"><h2>People <small>3 Total</small></h2></div>
      <div class="panel-body">
        <div class="panel panel-default">
          <div class="panel-heading"><h3>Person 1 of X</h3></div>
          <div class="panel-body">
            <div class="form-horizontal" role="form">
              <div class="form-group">
                <label for="person-name" class="col-sm-4 control-label">Name or Identifier <i class="fa form-label-icon fa-fw fa-asterisk"></i></label>
                <div class="col-sm-6">
                  <input id="person-name" class="form-control input-lg" placeholder="Name or Identifier">
                </div>
              </div>
              <div class="form-group">
                <label for="person-name" class="col-sm-4 control-label">Gender <i class="fa form-label-icon fw-fw fa-asterisk"></i></label>
                <div class="col-sm-8">
                  <div class="row" data-bind="foreach: _.where(options, { category: 'gender' })">
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-3">
                      <div class="list-group-item option">
                        <i class="fa fa-lg fa-circle-o"></i> <span data-bind="html: html"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="person-name" class="col-sm-4 control-label">Age Bracket <i class="fa form-label-icon fa-asterisk"></i></label>
                <div class="col-sm-6">
                  <div class="row" data-bind="foreach: _.where(options, { category: 'ageBracket'})">
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-3">
                      <div class="list-group-item option">
                        <i class="fa fa-lg fa-circle-o"></i>
                        <small data-bind="text: text"></small>
                      </div>                    
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="panel-footer">
            <div class="row">
              <div class="col-lg-6 col-lg-offset-3">
                <button class="btn btn-warning btn-lg btn-block">Remove Person</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="panel-footer">
        <div class="row">
          <div class="col-lg-6 col-lg-offset-3">
            <button class="btn btn-primary btn-lg btn-block">Add Person</button>
          </div>
        </div>
      </div>
    </section>
    <section id="people-summary" class="panel panel-default">
      <div class="panel-heading"><h2>People <span class="pull-right"><i class="fa fa-asterisk"></i></span></h2></div>
      <div class="panel-body">
        <div class="form-horizontal" role="form">
          <div class="form-group">
            <label for="" class="col-sm-4 control-label">Gender <sup><i class="fa fa-asterisk"></i></sup></label>
            <div class="col-sm-6">
              <div class="row">
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>Male</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>Female</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="" class="col-sm-4 control-label">Age Brackets <sup><i class="fa fa-asterisk"></i></sup></label>
            <div class="col-sm-6">
              <div class="row">
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>-17</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>18-21</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>22-25</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>26-29</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>30-34</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>35-39</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
                <div class="col-xs-6 col-sm-3">
                  <label class="control-label"><small>40+</small></label>
                  <input type="number" min="0" class="form-control" value=0>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="landing-pad" class="panel panel-warning">
      <div class="panel-heading"><h2>Landing Pad <span class="pull-right"><i class="fa fa-asterisk"></i></span></h2></div>
      <div class="panel-body">
        <div class="form-horizontal" role="form">
          <div class="form-group">
            <div class="col-sm-offset-4 col-sm-4">
              <button type="submit" class="btn btn-primary btn-lg btn-block">Complete</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script type="text/knockout-template" id="single-select-template">
    <div class="form-group" data-bind="css: { 'has-success': $root[$data.field].isValid() }">
      <label for="select-type" class="col-sm-4 control-label">
        <span data-bind="text: $data.label"></span>
        <i class="fa fa-fw form-label-icon" data-bind="css: {'fa-asterisk': ! $root[$data.field].isValid(), 'fa-check': $root[$data.field].isValid()} "></i>
      </label>
      <div class="col-sm-6 col-lg-4" id="select-type">
        <ul class="list-group" data-bind="foreach: _.where( $root.options, { category: $data.field } )">
          <li class="list-group-item option" data-bind="click: $root.selectOption, css: { 'text-info': $root[category]() == value, 'text-default': $root[category]() != value }">
            <i class="fa fa-lg" data-bind="css: { 'fa-bullseye': $root[category]() == value, 'fa-circle-o': $root[category]() != value }"></i>
            <span data-bind="html: html"></span>
          </li>
        </ul>
      </div>
    </div>
  </script>
</template>
